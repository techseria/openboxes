!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("prop-types"),require("final-form"),require("react-final-form")):"function"==typeof define&&define.amd?define(["exports","react","prop-types","final-form","react-final-form"],e):e(t["react-final-form-arrays"]={},t.React,t.PropTypes,t.FinalForm,t.ReactFinalForm)}(this,function(t,E,e,s,n){"use strict";function c(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=t&&this.setState(t)}function l(n){this.setState(function(t){var e=this.constructor.getDerivedStateFromProps(n,t);return null!=e?e:null}.bind(this))}function p(t,e){try{var n=this.props,o=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,o)}finally{this.props=n,this.state=o}}e=e&&e.hasOwnProperty("default")?e.default:e,p.__suppressDeprecationWarning=l.__suppressDeprecationWarning=c.__suppressDeprecationWarning=!0;var o=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}(),w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},W=function(t,e){var n={};for(var o in t)0<=e.indexOf(o)||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n};var r="1.0.6",O={"final-form":s.version,"react-final-form":n.version,"react-final-form-arrays":r},i=s.fieldSubscriptionItems.reduce(function(t,e){return t[e]=!0,t},{}),a=function(t){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,e));u.call(n);var o=void 0;return n.context.reactFinalForm&&n.subscribe(t,function(t){o?n.notify(t):o=t}),n.state={state:o},n.bindMutators(t),n.mounted=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(r,E.PureComponent),o(r,[{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e,n,o,r=t.name,i=t.subscription;(this.props.name!==r||(e=this.props.subscription,n=i,o=s.fieldSubscriptionItems,e?!n||o.some(function(t){return e[t]!==n[t]}):n))&&this.context.reactFinalForm&&(this.unsubscribe(),this.subscribe(t,this.notify)),this.props.name!==r&&this.bindMutators(t)}},{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.unsubscribe()}},{key:"render",value:function(){var t,e,n,o,r,i=this.props,a=i.name,s=W(i,["name"]),c=this.state.state||{},l=c.length,p=c.active,u=c.dirty,f=c.error,m=c.initial,d=c.invalid,h=c.pristine,v=c.submitError,y=c.submitFailed,b=c.submitSucceeded,F=c.touched,g=c.valid,_=c.visited,S=W(c,["length","active","dirty","error","initial","invalid","pristine","submitError","submitFailed","submitSucceeded","touched","valid","visited"]),P={active:p,dirty:u,error:f,initial:m,invalid:d,pristine:h,submitError:v,submitFailed:y,submitSucceeded:b,touched:F,valid:g,visited:_},U=w({},P,S);return t=w({fields:w({name:a,forEach:this.forEach,length:l,map:this.map},this.mutators,U),meta:P},s,{__versions:O}),e=t.render,n=t.children,o=t.component,r=W(t,["render","children","component"]),o?E.createElement(o,w({},r,{children:n})):e?e(w({},r,{children:n})):n(r)}}]),r}();a.displayName="ReactFinalFormFieldArray("+s.version+")("+r+")";var u=function(){var a=this;this.subscribe=function(t,e){var n=t.name,o=t.subscription;a.unsubscribe=a.context.reactFinalForm.registerField(n,e,o?w({},o,{length:!0}):i,{getValidator:function(){return a.validate}})},this.validate=function(){var t=a.props.validate;if(t){var e=t.apply(void 0,arguments);if(!e||Array.isArray(e))return e;var n=[];return n[s.ARRAY_ERROR]=e,n}},this.bindMutators=function(t){var r=t.name,e=a.context.reactFinalForm;if(e){var i=e.mutators;!!(i&&i.push&&i.pop)&&(a.mutators=Object.keys(i).reduce(function(t,o){return t[o]=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i[o].apply(i,[r].concat(e))},t},{}))}},this.notify=function(t){setTimeout(function(){a.mounted&&a.setState({state:t})})},this.forEach=function(t){for(var e=a.props.name,n=a.state.state&&a.state.state.length||0,o=0;o<n;o++)t(e+"["+o+"]",o)},this.map=function(t){for(var e=a.props.name,n=a.state.state&&a.state.state.length||0,o=[],r=0;r<n;r++)o.push(t(e+"["+r+"]",r));return o}};a.contextTypes={reactFinalForm:e.object},function(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate)return;var n=null,o=null,r=null;if("function"==typeof e.componentWillMount?n="componentWillMount":"function"==typeof e.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof e.componentWillReceiveProps?o="componentWillReceiveProps":"function"==typeof e.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"==typeof e.componentWillUpdate?r="componentWillUpdate":"function"==typeof e.UNSAFE_componentWillUpdate&&(r="UNSAFE_componentWillUpdate"),null!==n||null!==o||null!==r){var i=t.displayName||t.name,a="function"==typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==o?"\n  "+o:"")+(null!==r?"\n  "+r:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof t.getDerivedStateFromProps&&(e.componentWillMount=c,e.componentWillReceiveProps=l),"function"==typeof e.getSnapshotBeforeUpdate){if("function"!=typeof e.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=p;var s=e.componentDidUpdate;e.componentDidUpdate=function(t,e,n){var o=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,t,e,o)}}}(a),t.FieldArray=a,t.version=r,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=react-final-form-arrays.umd.min.js.map
